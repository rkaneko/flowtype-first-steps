<!DOCTYPE html>
<html>
  <head>
    <title>Flowtype First Steps</title>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="./img/favicon.ico"/>
    <link href="./css/index.css" rel="stylesheet" type="text/css">
    <link href="./css/font-awesome.min.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <textarea id="source">

name: rkaneko-theme
layout: true
class: rkaneko-theme
---
class: title-page

# Flowtype First Steps
## 
#### March 28th, 2017

<span class="head-my-name">
  <span class="head-my-name__icon">
    <img src="./img/myicon_round.png" alt="rkaneko"/>
  </span>
  <span class="head-my-name__text">
    Ryota Kaneko
  </span>
</span>
  
<span class="head-github-name">
  <span class="head-github-name__icon">
    <i class="fa fa-github fa-2x"></i>
  </span>
  <span class="head-github-name__text">
    rkaneko
  </span>
</span>
---

# Agenda

0. What's Flowtype?

0. Getting started Flowtype

0. Basics

0. In practice

0. Conclusion
---
class: paragraph-page

# What's Flowtype?
---
# What's Flowtype?

#### https://github.com/facebook/flow

#### Opt-in static type checker for JavaScript

- 既存コードに漸近的にflowのsyntaxを追加していける
- OCaml実装

#### Type inference

- 暗黙的な型変換によるバグチェック
- null, undefinedな可能性のある値のチェック

#### Idiomatic JS

- 型定義を書かないJSのコードスタイルの意味を出来る限り理解するようにデザインされている
  - any typeを利用して型チェックをオプトアウトさせるという選択もある
- Facebook製ということもあり、React.jsとの親和性も考慮されている模様
---
# Ecosystems

#### flow-bin

- https://github.com/flowtype/flow-bin
- Binary wrapper for Flow
- npm ecosystemではこのCLIを利用して型チェックを実行する

#### flow-typed

- https://github.com/flowtype/flow-typed
- 3rd party libsの型定義ファイルのレポジトリ
- flow-type CLIではpackage.jsonを見てプロジェクトに必要な型定義ファイルを管理する

---
# Ecosystems

#### flow-remove-types

- https://github.com/flowtype/flow-remove-types
- Flowのtype annotationsをJSファイルから削除する
- babel-plugin-transform-flow-strip-typesのようにbabelのbuild pipelineの中でtype annotationsを削除するものもある
  - https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-flow-strip-types 

#### Editors support

- VS code, Vim, Emacs

.center[.reference[Reference: [github.com/flowtype](https://github.com/flowtype)]]

---
# Ecosystems

#### Try Flow

- https://flowtype.org/try/

.center[<img src="./img/try-flow-src.png" alt="rkaneko" width="280px"/>]
.center[<img src="./img/try-flow-result.png" alt="rkaneko" width="540px"/>]
---
class: paragraph-page

# Getting started Flowtype
---
### Getting started

#### Prerequisites

- node v6
- npm v4

#### packages

- flow-bin v0.42.0

```bash
# In some project directory
$ npm init -f
```

---
class: paragraph-page

# Basics

---
# Primitive Types

#### Booleans

```js
(true: boolean);
(false: boolean);
("blahblah": boolean);  // Error
(undefined: boolean);  // Error
(null: boolean);  // Error
(0: boolean);  // Error
```
---
# Primitive Types

#### Booleans

```js
function reverse(flag: boolean): boolean {
  return !flag;
}

reverse(true);
reverse(false);
reverse('text');  // Error
reverse(0);  // Error
reverse(Boolean(0));
```

- https://flow.org/try/#0PQKgBAAgZgNg9gdzCYAoVAKALgJwK4CmAXGAEZxwwECGAdgJQDcmU1MAzsWRVXU5gCJSMagAthYgSXKUaDRmDDBgYAKI4ccHJjy0AJgSgBLWgT3SecpouVqNWzLTwwYF2XwVKV6zdowAGN155G297bVQoXQBjLCM4WjAcAgA3AhxODFhqAHMgq3y6MABvVEVkrDwcRIBCbJzmAF90ZLSMgmx8An5W9MzWDm7mXvaMASwCAA8sAWsvO19UEcz-OdsfB2WOgCFLOgD6JiA
---
# Primitive Types

#### Numbers

```js
(256: number);
(3.14: number);
(NaN: number);
(Infinity: number);
("3.14": number);  // Error
```

- https://flow.org/try/#0PQKgBAAgZgNg9gdzCYAoVAKATAVgGwBcYAdgK4C2ARgKYBOAlANyYDMAdAIwAsRZVdTTADkAhkN4UaDZhgCSxKAEtiigC4BPCf2mYARO266tUpmDDBgYAKK1acWkA
---
# Primitive Types

#### Strings

```js
('blahblah': string);
('true': string);
('': string);
const text1: string = undefined;  // Error
const text2: string = 1;  // Error
const text3: string = true;  // Error
const text4: string = {};  // Error
'' + String(false);
'' + JSON.stringify({});
```

- https://flow.org/try/#0BQcgRgNghgFpsgFwAIDOAXATgSwHYHMBKAbgChQsBXAUyTSzyLNDoxwJNIGMB7XDZOmoAPdAEYUbRsgC8ySrgAm1AGZ5qi4smQB6HcgCimTD0zc+AoaIBMkhgVnIxW3fqMmzvfukEj0AZjt2fEcqahc9Q2NTc29fUQAWIOk5AG8AXwi3aLMQEGQAamQAZXt8YBUoCFRqTjzC5AApYoB5ADkAOikCbBUAT2AMkiA

---
# Primitive Types

- `null`と`undefined`は区別される

#### null

```js
function acceptsNull(v: null) {
  console.log(v);
}

acceptsNull(null);
acceptsNull(undefined);  // Error
```

#### void

```js
function acceptsUndefined(v: void) {
  console.log(v);
}

acceptsUndefined(undefined);
acceptsUndefined(null);  // Error
```

- https://flow.org/try/#0PQKgBAAgZgNg9gdzCYAoVUCuA7AxgFwEs5swBDXXAUwAd8BnAOUxhgAoA3ALjGxZgCUYAN6owYXCXpwYVAHTwA5pwEBuVAF90FanSb82fVmtQ7aDZqzY4AJlSiFsVG2vHBgYAKIAnb3G-oWHhEJOSU5vQAqth2Dk42nDwccIQuIuIZmVnZObl5+QWFRcX5YhJSMvJKKupapuF60bGOztYx9i0u6maN7XGtRoKqbh4+fgFAA

---
# Primitive Types

#### Maybe types

- Maybe typesは`null`と`undefined`どちらも受け入れる

```js
function acceptsMaybe(v: ?string) {
  console.log(v);
}

acceptsMaybe('text');
acceptsMaybe(null);
acceptsMaybe(undefined);
acceptsMaybe();
```

- https://flow.org/try/#0PQKgBAAgZgNg9gdzCYAoVUCuA7AxgFwEs5swBDXXAUwAd8BnAWTIE8AjKgCgDcAuMAPz18AJ0LYA5gEowAb1RgwuEvTgwqAOngSeUgNyoAvugrU6TVh04ByfFQAe+a-sWu37j56-efvv-4DAn1RTWgZmdi5sTBgYfRDKMItIzhwAEyoocSo0+NDzCKt9IA

---
# Primitive Types

#### Optional

- `void`と「省略」は受け入れる
- `null`は受け入れない

```js
// Optional object properties
({foo: 'bar'}: {foo?: string});
({foo: undefined}: {foo?: string});
({}: {foo?: string});
({foo: null}: {foo?: string});  // Error
```

- https://flow.org/try/#0PQKgBAAgZgNg9gdzCYAoVxhgPIAcAuAlnAHYCGMYcARgFYCmAxvmLgE5y71tH0DOqABQBvKHDgAuMAHJqZNtIC+U0eID8UvvjaESAc0UBKANxDVksAFcSAE3pRd9G8rDmNYLTv1HTIl281tXQMTMzELEksYGH9w909gnzAwTDAAUTYONiA

```js
// Optional function parameters
function acceptsOptionalString(v?: string) {
  console.log(v;
}

acceptsOptionalString('text');
acceptsOptionalString(undefined);
acceptsOptionalString();
acceptsOptionalString(null);  // Error
```

- https://flow.org/try/#0PQKgBAAgZgNg9gdzCYAoVxhgPIAcAuAlnAHYCGMYUAriQMZGli5kBOZAtgKb5esDOqGvUYkwZOnS4F+eURQDK+VoRIBzABQA3APwAuMP2Wq1ASjABvVGDB1S-ODC4A6eJq2mA3KgC+6CVIycsTkMEoq6hoA5LwAHvhRXqgB0viyBCGKxpG0ACZcUKpcuUkpQRmkWRGapZKp6fJh2Zok1DAwXjaYYACirKxwrGBAA
---
# Primitive Types

#### Default parameters

[ES2015 default function parameters](http://www.ecma-international.org/ecma-262/6.0/#sec-functiondeclarationinstantiation)に型定義をつけると

- `void`と「省略」は受け入れる
- `null`は受け入れない

```js
function acceptsOptString(v: string = 'bar') {
  console.log(v);
}

acceptsOptString('foo');
acceptsOptString(undefined);
acceptsOptString();
acceptsOptString(null);  // Error
```

- https://flow.org/try/#0PQKgBAAgZgNg9gdzCYAoVUCuA7AxgFwEs5swBDXXAUwAd8BnAeToGV8AnQ7AcwAoA3AFxh6HLtzABeMAHIARmXYyAlGADeqMGFwl6cGFQB08Pv2UBuVAF90FanSasxPXjKhw4Ky3doNm+Nk4XHAATKiguKhCLVB8Hf0DxXhi4vycgvmxMGBgLLWBgMABRdnY4djAgA

---

# Unsupported

- [Symbols](https://flow.org/en/docs/types/primitives/#toc-symbols)
---
# Table

|left|center|right|
|:---|:---:|---:|
|blahblahblahblah blahblahblahblahblahblah|blahblahblah blahblahblahblahblah blahblah|blahblahblahblahblah blahblahblahblahblahblah|
|blahblahblahblah blahblahblahblahblahblah|blahblahblah blahblahblahblahblah blahblah|blahblahblahblahblah blahblahblahblahblahblah|
|blahblahblahblah blahblahblahblahblahblah|blahblahblah blahblahblahblahblah blahblah|blahblahblahblahblah blahblahblahblahblahblah|
|blahblahblahblah blahblahblahblahblahblah|blahblahblah blahblahblahblahblah blahblah|blahblahblahblahblah blahblahblahblahblahblah|
|blahblahblahblah blahblahblahblahblahblah|blahblahblah blahblahblahblahblah blahblah|blahblahblahblahblah blahblahblahblahblahblah|
|blah|blah|blah|

---

class: center

#### centering slide

<img src="./img/myicon_round.png" alt="rkaneko" width="540px"/>

---
class: center, middle

# center &amp; middle

---
class: paragraph-page

## the paragraph page
### .color-yellow[yellow]
### .color-red[red]
### .color-green[green]

### [Font Awesome](https://fortawesome.github.io/Font-Awesome/)
---

### Tips

+ colors

  - .color-yellow[yellow]
  - .color-red[red]
  - .color-blue[blue]
  - .color-green[green]
  - .color-grey[grey]
  - .color-light-grey[light grey]
  - .color-orange[orange]
  - .color-pink[pink]
  - .color-purple[purple]
  - .color-black[black]
  - .color-white[white]

.center[.reference[Reference: [materialize color](http://materializecss.com/color.html)]]
---
# blockquote

.center[
.blockquote[
リスクとは、

自分が何をやっているか

よくわからないときに

起こるものです。

.blockquote-origin[Warren Edward Buffett]
]
]

---
### Tips

+ code

```js
(() => {
  console.log('Hello my slide!');
})();
```

+ link

  - [rkaneko @ GitHub](https://github.com/rkaneko)

---
class: paragraph-picture-page

<figure>
<img src="./img/spit-on.gif" alt="spit-on"/>
<div class="paragraph-picture-page__block"></div>
<figcaption><p class="paragraph-picture-page__caption">awesome!</p></figcaption>
</figure>
---
class: paragraph-page

### Thanks!

    </textarea>
    <script src="./javascript/remark-0.14.0.js"></script>
    <script>
      var slideshow = remark.create({
        ratio: '4:3',
        highlightStyle: 'androidstudio',
      });
    </script>
  </body>
</html>
